{
	"name": "sourcebroker/imageopt",
	"description": "Optimize images created/resized by TYPO3 so they take less space. Safe as it does not optimize original images.",
	"license": [
		"GPL-2.0-or-later"
	],
	"type": "typo3-cms-extension",
	"require": {
		"php": ">=8.1",
		"ext-curl": "*",
		"ext-json": "*",
		"typo3/cms-core": "^12.4"
	},
	"require-dev": {
		"ergebnis/composer-normalize": "^2.29.0",
		"friendsofphp/php-cs-fixer": "^3.57.1",
		"phpstan/extension-installer": "^1.2.0",
		"phpstan/phpstan": "^1.10.67",
		"phpstan/phpstan-phpunit": "^1.3.16",
		"phpstan/phpstan-strict-rules": "^1.5.5",
		"phpunit/phpunit": "^10.5.17",
		"saschaegerer/phpstan-typo3": "^1.10.0",
		"seld/jsonlint": "^1.10.2",
		"symfony/dotenv": "^5 || ^6 || ^7",
		"symfony/yaml": "^5.4 || ^6.0 || ^7.0",
		"typo3/cms-install": "^12.4.16",
		"typo3/coding-standards": "^0.8",
		"typo3/testing-framework": "^8.2.1",
		"webmozart/assert": "^1.11.0"
	},
	"replace": {
		"typo3-ter/imageopt": "self.version"
	},
	"autoload": {
		"psr-4": {
			"SourceBroker\\Imageopt\\": "Classes/"
		}
	},
	"autoload-dev": {
		"psr-4": {
			"SourceBroker\\Imageopt\\Tests\\": "Tests"
		}
	},
	"config": {
		"allow-plugins": {
			"ergebnis/composer-normalize": true,
			"phpstan/extension-installer": true,
			"typo3/class-alias-loader": true,
			"typo3/cms-composer-installers": true
		},
		"bin-dir": ".Build/bin",
		"vendor-dir": ".Build/vendor"
	},
	"extra": {
		"typo3/cms": {
			"extension-key": "imageopt",
			"web-dir": ".Build/public"
		}
	},
	"scripts": {
		"ci": [
			"@ci:composer:normalize",
			"@ci:tests:unit"
		],
		"ci:composer:normalize": "@composer normalize --dry-run",
		"ci:json:lint": "find ./composer.json ./Resources ./Configuration -name '*.json' | xargs -r php .Build/bin/jsonlint -q",
		"ci:php:cs-fixer": ".Build/bin/php-cs-fixer fix --config .php-cs-fixer.php -v --dry-run --using-cache no --diff",
		"ci:php:lint": "find . -name '*.php' -not -path './.Build/*' -not -path './.cache/*' -not -path './.ddev/*' -not -path './.test/*' -not -path './.Documentation/*'  -not -path './.Documentation-GENERATED-temp/*' -print0 | xargs -0 -n 1 -P 4 php -l > /dev/null",
		"ci:php:stan": ".Build/bin/phpstan --no-progress",
		"ci:tests:create-directories": "mkdir -p .Build/public/typo3temp/var/tests",
		"ci:tests:functional": [
			"@ci:tests:create-directories",
			"typo3DatabaseHost=db typo3DatabaseUsername=root typo3DatabasePassword=root typo3DatabaseName=db .Build/bin/phpunit -c ./Build/phpunit/FunctionalTests.xml"
		],
		"ci:tests:unit": ".Build/bin/phpunit -c ./Build/phpunit/UnitTests.xml",
		"ci:yaml:lint": "find ./Resources ./Configuration -regextype egrep -regex '.*.ya?ml$' | xargs -r php .Build/bin/yaml-lint",
		"fix": [
			"@fix:php:cs-fixer",
			"@fix:composer:normalize"
		],
		"fix:composer:normalize": "@composer normalize",
		"fix:php:cs-fixer": ".Build/bin/php-cs-fixer fix --config .php-cs-fixer.php"
	}
}
